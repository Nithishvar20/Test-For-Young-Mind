import{r as l,j as t}from"./index-CuAHal8p.js";function X(d,m,r){return Math.max(m,Math.min(r,d))}function G(d){const m=X(d,0,14);if(m<=4){const r=m/4,k=255,c=Math.round(60+140*r),w=Math.round(40+40*r);return`rgb(${k},${c},${w})`}else if(m<=10){const r=(m-4)/6,k=Math.round(255-200*r),c=Math.round(200+55*r),w=Math.round(60+140*r);return`rgb(${k},${c},${w})`}else{const r=(m-10)/4,k=Math.round(55-20*r),c=Math.round(255-80*r),w=Math.round(200+55*r);return`rgb(${k},${c},${w})`}}function ct(){const[d,m]=l.useState(25),[r,k]=l.useState(.08),[c,w]=l.useState(.09),[R,Z]=l.useState(1),[L,I]=l.useState(0),[x,E]=l.useState(0),[j,B]=l.useState([]),[H,W]=l.useState(!1),h=l.useRef(null),[J,q]=l.useState([]),K=l.useRef(0),D=l.useRef(null);function z(n,e,b,u){const a=n/1e3,s=b/1e3,o=a*e,M=s*u,v=a+s||1e-12,g=o-M;let i=7;if(Math.abs(g)<1e-12)i=7;else if(g>0){const p=g/v;i=-Math.log10(p)}else{const p=Math.abs(g)/v;i=14- -Math.log10(p)}return{pH:i,na:o,nb:M,totalV:v,net:g,equivalenceVolMl:o/u*1e3}}const V=z(d,r,x,c),C=V.pH,y=V.equivalenceVolMl;function f(n,e=2){return Math.abs(n)>=1e3?n.toFixed(0):Number(n).toFixed(e)}function P(){const n=+(x+R).toFixed(6);E(n),I(a=>a+1);const e=z(d,r,n,c);B(a=>{const s=[...a,{vol:n,pH:e.pH}];return s.length>2e3&&s.shift(),s});const b=K.current++,u=140+Math.random()*140;q(a=>a.concat({id:b,left:u})),setTimeout(()=>q(a=>a.filter(s=>s.id!==b)),900)}function Q(){E(0),I(0),B([]),W(!1),h.current&&(clearInterval(h.current),h.current=null)}l.useEffect(()=>{if(!H){h.current&&(clearInterval(h.current),h.current=null);return}return h.current=setInterval(()=>{if(x>Math.max(y+5,y*1.5)||x>200){W(!1),clearInterval(h.current),h.current=null;return}P()},220),()=>{h.current&&(clearInterval(h.current),h.current=null)}},[H,x,d,r,c,R]),l.useEffect(()=>{if(j.length===0&&x===0){const n=z(d,r,0,c);B([{vol:0,pH:n.pH}])}},[]),l.useEffect(()=>{const n=D.current;if(!n)return;const e=n.getContext("2d");function b(){const a=n.parentElement.clientWidth,s=n.width=a,o=n.height=260;e.clearRect(0,0,s,o),e.fillStyle="#081426",e.fillRect(0,0,s,o),e.strokeStyle="rgba(255,255,255,0.04)",e.lineWidth=1,e.beginPath();const M=6;for(let S=0;S<=M;S++){const A=S/M*s;e.moveTo(A,0),e.lineTo(A,o)}if(e.stroke(),!j||j.length===0){e.fillStyle="rgba(255,255,255,0.06)",e.font="13px Inter, system-ui, sans-serif",e.fillText("Add drops to build the titration curve",12,o/2);return}const v=j.map(S=>S.vol),g=Math.max(...v,x),i=Math.max(y*1.3,g*1.2,y+10,10),p=0,F=14;e.fillStyle="rgba(255,255,255,0.75)",e.font="12px Inter, system-ui, sans-serif",e.fillText("pH",8,14),e.fillText("0 mL",10,o-6),e.fillText(`${Math.round(i)} mL`,s-60,o-6),e.beginPath(),e.lineWidth=2.8,e.strokeStyle="#60a5fa",j.forEach((S,A)=>{const Y=S.vol/i*(s-40)+20,O=o-(S.pH-p)/(F-p)*(o-30)-10;A===0?e.moveTo(Y,O):e.lineTo(Y,O)}),e.stroke();const N=j[j.length-1],rt=N.vol/i*(s-40)+20,st=o-(N.pH-p)/(F-p)*(o-30)-10;e.beginPath(),e.fillStyle="#fb7185",e.arc(rt,st,5.5,0,Math.PI*2),e.fill();const $=y/i*(s-40)+20;e.strokeStyle="rgba(255,255,255,0.12)",e.setLineDash([6,6]),e.beginPath(),e.moveTo($,8),e.lineTo($,o-8),e.stroke(),e.setLineDash([]),e.fillStyle="rgba(255,255,255,0.7)",e.fillText("Eq",$+6,18)}b();const u=new ResizeObserver(b);return u.observe(n.parentElement),()=>u.disconnect()},[j,x,y]);const U={paddingTop:88,paddingLeft:32,paddingRight:32,paddingBottom:"3cm",color:"#fff",boxSizing:"border-box",minHeight:"100vh",background:"linear-gradient(180deg,#1b0d2a,#071427 40%)"},_={textAlign:"center",fontSize:34,marginBottom:6,fontWeight:800},tt={textAlign:"center",color:"rgba(255,255,255,0.75)",marginTop:0,marginBottom:18},et={background:"linear-gradient(180deg,#071428,#081726)",borderRadius:12,padding:18,boxShadow:"0 10px 30px rgba(0,0,0,0.5)"},nt={background:"rgba(255,255,255,0.03)",borderRadius:12,padding:16,boxShadow:"0 8px 30px rgba(0,0,0,0.45)"},T={width:"100%",height:6,appearance:"none",background:"linear-gradient(90deg,#213247,#0f2430)",borderRadius:6,outline:"none"};return t.jsxs("div",{style:U,children:[t.jsx("h1",{style:_,children:"Virtual Titration — Strong Acid / Strong Base"}),t.jsx("p",{style:tt,children:"Add drops of base to neutralize the acid. Watch the pH and the titration curve."}),t.jsxs("div",{style:{display:"flex",gap:22,alignItems:"flex-start"},children:[t.jsx("div",{style:{flex:1},children:t.jsx("div",{style:et,children:t.jsxs("div",{style:{display:"flex",gap:18,alignItems:"flex-start"},children:[t.jsxs("div",{style:{flex:1,minWidth:360},children:[t.jsxs("div",{style:{position:"relative",width:"100%",height:320,borderRadius:10,overflow:"hidden",background:"#071a24",boxShadow:"inset 0 6px 40px rgba(0,0,0,0.6)"},children:[t.jsxs("svg",{viewBox:"0 0 420 320",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"liquidGradA",x1:"0",x2:"0",y1:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:G(C),stopOpacity:"0.96"}),t.jsx("stop",{offset:"100%",stopColor:"#061826",stopOpacity:"0.8"})]})}),t.jsx("rect",{x:"110",y:"40",rx:"12",ry:"12",width:"200",height:"240",fill:"#041623",stroke:"rgba(255,255,255,0.03)",strokeWidth:"1"}),(()=>{const n=d+x,e=d+Math.max(40,y*1.2),b=X(n/e,0,.98),u=240,a=u*b,s=40+(u-a),o=6,M=i=>{const p=i/200;return s+Math.sin(p*Math.PI*6+x*.2)*(o*(.25+.75*(1-b)))},v=44;let g=`M 110 ${40+u} L 110 ${M(0)} `;for(let i=0;i<=v;i++){const p=110+i/v*200;g+=`L ${p} ${M(i/v*200)} `}return g+=`L 310 ${40+u} Z`,t.jsxs(t.Fragment,{children:[t.jsx("path",{d:g,fill:"url(#liquidGradA)"}),t.jsx("ellipse",{cx:210,cy:s-8,rx:56,ry:10,fill:"rgba(255,255,255,0.03)"})]})})(),t.jsxs("g",{children:[t.jsx("circle",{cx:210,cy:160,r:44,fill:G(C),opacity:.98}),t.jsxs("text",{x:210,y:164,textAnchor:"middle",fontWeight:"800",fontSize:"18",fill:"#041825",children:["pH ",f(C,2)]})]})]}),J.map(n=>t.jsx("div",{style:{position:"absolute",left:`${n.left}px`,top:8,width:10,height:16,borderRadius:8,background:"rgba(255,255,255,0.95)",transform:"translateY(0)",animation:"dropFall 0.9s ease-in forwards",filter:"drop-shadow(0 6px 18px rgba(0,0,0,0.6))"}},n.id))]}),t.jsxs("div",{style:{marginTop:12,color:"rgba(255,255,255,0.85)",fontSize:14},children:["Volume added: ",t.jsxs("strong",{children:[f(x,2)," mL"]})," (",L," drops)",t.jsx("span",{style:{margin:"0 8px",color:"rgba(255,255,255,0.45)"},children:"•"}),"Expected equivalence: ",t.jsxs("strong",{children:[f(y,2)," mL"]})]}),t.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,alignItems:"center",flexWrap:"wrap"},children:[t.jsx("button",{onClick:P,style:ot,children:"Add Drop"}),t.jsx("button",{onClick:()=>W(n=>!n),style:H?lt:it,children:H?"Stop":"Auto Titrate"}),t.jsx("button",{onClick:Q,style:at,children:"Reset"}),t.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:8},children:[t.jsx("label",{style:{color:"rgba(255,255,255,0.85)",fontSize:14},children:"Drop vol"}),t.jsx("input",{type:"range",min:.1,max:2.5,step:.1,value:R,onChange:n=>Z(Number(n.target.value)),style:T}),t.jsxs("div",{style:{width:56,textAlign:"right",color:"rgba(255,255,255,0.9)"},children:[f(R,2)," mL"]})]})]})]}),t.jsx("div",{style:{width:300},children:t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",padding:12,borderRadius:10},children:[t.jsx("div",{style:{fontWeight:800,marginBottom:8},children:"Readouts"}),t.jsxs("div",{style:{fontSize:14,marginBottom:6},children:["pH: ",t.jsx("strong",{children:f(C,2)})]}),t.jsxs("div",{style:{fontSize:14,marginBottom:6},children:["Volume added: ",t.jsxs("strong",{children:[f(x,2)," mL"]})]}),t.jsxs("div",{style:{fontSize:14,marginBottom:8},children:["Drops: ",t.jsx("strong",{children:L})]}),t.jsx("hr",{style:{opacity:.06,margin:"10px 0"}}),t.jsx("div",{style:{fontWeight:800},children:"Simulation"}),t.jsxs("div",{style:{marginTop:6,fontSize:13},children:["Moles acid: ",t.jsx("strong",{children:V.na.toExponential(3)})]}),t.jsxs("div",{style:{fontSize:13},children:["Equiv. vol (calc): ",t.jsxs("strong",{children:[f(y,2)," mL"]})]})]})})]})})}),t.jsx("aside",{style:{width:380},children:t.jsxs("div",{style:nt,children:[t.jsx("div",{style:{fontWeight:900,fontSize:16,marginBottom:12},children:"Controls"}),t.jsxs("div",{style:{display:"grid",gap:12},children:[t.jsxs("div",{style:{fontSize:14,color:"rgba(255,255,255,0.9)"},children:["Beaker volume: ",t.jsxs("strong",{children:[f(d,0)," mL"]})]}),t.jsx("input",{type:"range",min:5,max:100,step:1,value:d,onChange:n=>m(Number(n.target.value)),style:T}),t.jsxs("div",{style:{fontSize:14},children:["Acid conc (HCl): ",t.jsxs("strong",{children:[f(r,3)," M"]})]}),t.jsx("input",{type:"range",min:.01,max:.5,step:.005,value:r,onChange:n=>k(Number(n.target.value)),style:T}),t.jsxs("div",{style:{fontSize:14},children:["Base conc (NaOH): ",t.jsxs("strong",{children:[f(c,3)," M"]})]}),t.jsx("input",{type:"range",min:.01,max:.5,step:.005,value:c,onChange:n=>w(Number(n.target.value)),style:T})]}),t.jsx("hr",{style:{border:"none",height:1,background:"rgba(255,255,255,0.06)",margin:"14px 0"}}),t.jsx("div",{style:{fontWeight:900,marginBottom:10},children:"Titration Curve"}),t.jsx("div",{style:{borderRadius:8,overflow:"hidden",background:"#071922",padding:8},children:t.jsx("canvas",{ref:D,style:{width:"100%",height:260,display:"block",borderRadius:6}})})]})})]}),t.jsx("style",{children:`
        /* Buttons */
        .btn-base { border-radius: 10px; padding: 10px 14px; font-weight: 800; cursor: pointer; border: none; }
      `}),t.jsx("style",{children:`
        @keyframes dropFall {
          0% { transform: translateY(0); opacity: 1; }
          60% { transform: translateY(60px); opacity: 1; }
          100% { transform: translateY(200px); opacity: 0; }
        }
      `})]})}const ot={borderRadius:10,padding:"10px 14px",background:"#fb6b3b",color:"#fff",fontWeight:800,border:"none",cursor:"pointer",boxShadow:"0 6px 18px rgba(251,107,59,0.18)"},it={borderRadius:10,padding:"10px 14px",background:"#10b981",color:"#fff",fontWeight:800,border:"none",cursor:"pointer",boxShadow:"0 6px 18px rgba(16,185,129,0.12)"},lt={borderRadius:10,padding:"10px 14px",background:"#ef4444",color:"#fff",fontWeight:800,border:"none",cursor:"pointer",boxShadow:"0 6px 18px rgba(239,68,68,0.12)"},at={borderRadius:10,padding:"10px 14px",background:"#374151",color:"#fff",fontWeight:700,border:"none",cursor:"pointer"};export{ct as default};
