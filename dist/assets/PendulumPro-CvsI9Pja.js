import{r as o,j as e}from"./index-CuAHal8p.js";function ce(){const[d,S]=o.useState(1),[x,R]=o.useState(.05),[f,V]=o.useState(9.81),[j,X]=o.useState(0),[E,Y]=o.useState(1.5),[T,Q]=o.useState(.01),[M,Z]=o.useState(1),[F,G]=o.useState(!1),p=o.useRef({t:0,theta:.9,omega:0}),w=o.useRef(null),y=o.useRef(null),P=o.useRef(null),[H,I]=o.useState([]),u=o.useRef([]),$=3e3,ee=2*Math.PI*Math.sqrt(1/f);function U(n,t){const s=.5*d*Math.pow(1*t,2),a=d*f*1*(1-Math.cos(n));return{KE:s,PE:a,E:s+a}}function D(n,t){const s=x/d,a=j?j/(d*Math.pow(1,2))*Math.sin(E*t):0;return{thetaDot:n.omega,omegaDot:-(f/1)*Math.sin(n.theta)-s*n.omega+a}}function te(n,t,s){const a=D(n,t),c={theta:n.theta+.5*s*a.thetaDot,omega:n.omega+.5*s*a.omegaDot},i=D(c,t+.5*s),r={theta:n.theta+.5*s*i.thetaDot,omega:n.omega+.5*s*i.omegaDot},l=D(r,t+.5*s),h={theta:n.theta+s*l.thetaDot,omega:n.omega+s*l.omegaDot},b=D(h,t+s);return{theta:n.theta+s/6*(a.thetaDot+2*i.thetaDot+2*l.thetaDot+b.thetaDot),omega:n.omega+s/6*(a.omegaDot+2*i.omegaDot+2*l.omegaDot+b.omegaDot)}}function B(){p.current={t:0,theta:.9,omega:0},I([{t:0,theta:.9,omega:0,...U(.9,0)}]),u.current=[],k()}o.useEffect(()=>{B()},[]),o.useEffect(()=>{const n=P.current;if(!n)return;function t(){const s=n.parentElement,a=Math.max(400,s.clientWidth),c=Math.max(400,window.innerHeight-72-160);n.width=Math.floor(a),n.height=Math.floor(c),k()}return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[d,x,j,E,T,M,f]),o.useEffect(()=>{function n(t){y.current||(y.current=t);const s=t-y.current;y.current=t;const a=s/1e3*M;if(F&&a>1e-8){let c=a;for(;c>1e-8;){const i=Math.min(T,c),r=p.current,l=te(r,r.t,i),h=r.t+i;r.theta<0&&l.theta>=0&&l.omega>0&&(u.current.push(h),u.current.length>40&&u.current.shift()),p.current={t:h,theta:l.theta,omega:l.omega},c-=i}I(i=>{const r=p.current,l=U(r.theta,r.omega),h=i.concat({t:r.t,theta:r.theta,omega:r.omega,...l});return h.length>$&&h.shift(),h})}k(),w.current=requestAnimationFrame(n)}return w.current=requestAnimationFrame(n),()=>cancelAnimationFrame(w.current)},[F,T,M,j,E,x,d,f]);function k(){const n=P.current;if(!n)return;const t=n.getContext("2d"),s=n.width,a=n.height;t.fillStyle="#071129",t.fillRect(0,0,s,a);const c=Math.floor(s/2),i=Math.floor(a/2),r=Math.max(s/2-24,40),l=Math.max(a/2-24,40),h=Math.min(r,l),b=Math.max(30,Math.min(h/Math.max(.001,1),260)),q=p.current,K=c+Math.sin(q.theta)*1*b,N=i+Math.cos(q.theta)*1*b;t.beginPath(),t.moveTo(c,i),t.lineTo(K,N),t.strokeStyle="rgba(255,255,255,0.25)",t.lineWidth=3,t.stroke(),t.beginPath(),t.fillStyle="#fff",t.arc(c,i,5,0,Math.PI*2),t.fill();const oe=Math.max(8,Math.min(20,8+d*2));t.beginPath(),t.fillStyle="#60a5fa",t.arc(K,N,oe,0,Math.PI*2),t.fill()}function ne(){G(n=>{const t=!n;return t&&(y.current=null),t})}function se(){G(!1),B()}const O=p.current,v=H.length?H[H.length-1]:null,W=u.current.length>2?u.current[u.current.length-1]-u.current[u.current.length-2]:null,ae={maxWidth:1280,margin:"10px auto",display:"flex",gap:12,padding:12},_={background:"linear-gradient(180deg,#0f1724,#0b1220)",borderRadius:10,padding:12,color:"#e6eef8",boxShadow:"0 8px 24px rgba(2,6,23,0.45)"};return e.jsx("div",{style:{paddingTop:80,background:"#071129",minHeight:"100vh"},children:e.jsxs("div",{style:ae,children:[e.jsxs("div",{style:{..._,flex:"0 0 45%"},children:[e.jsx("div",{style:{fontSize:16,fontWeight:800,marginBottom:6},children:"Pendulum Display"}),e.jsx("div",{style:{borderRadius:8,background:"#071024",height:"65vh",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("canvas",{ref:P,style:{width:"100%",height:"100%"}})})]}),e.jsxs("div",{style:{..._,flex:"0 0 30%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[e.jsx("h3",{style:{margin:0,fontSize:16},children:"Controls"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{onClick:ne,style:J,children:F?"Pause":"Run"}),e.jsx("button",{onClick:se,style:ie,children:"Reset"})]})]}),e.jsx(g,{label:"Mass (kg)",value:d,set:S,min:.1,max:5,step:.05,purpose:"Heavier bobs swing slower due to inertia."}),e.jsx(g,{label:"Damping",value:x,set:R,min:0,max:1.2,step:.01,purpose:"Frictional resistance that slows motion over time."}),e.jsx(g,{label:"Gravity (m/s²)",value:f,set:V,min:1,max:15,step:.01,purpose:"Controls how strong the gravitational pull is."}),e.jsx(g,{label:"Time step (dt)",value:T,set:Q,min:.001,max:.05,step:.001,purpose:"Smaller steps give more accurate simulation but slower speed."}),e.jsx(g,{label:"Time scale",value:M,set:Z,min:.1,max:4,step:.05,purpose:"Adjusts overall simulation speed."}),e.jsx(g,{label:"Drive amplitude",value:j,set:X,min:0,max:6,step:.01,purpose:"Strength of external periodic force applied."}),e.jsx(g,{label:"Drive frequency",value:E,set:Y,min:0,max:8,step:.01,purpose:"Frequency of external periodic driving force."})]}),e.jsxs("div",{style:{..._,flex:"0 0 25%"},children:[e.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:16},children:"Measurements"}),e.jsxs("div",{style:m,children:[e.jsx("div",{children:"Angle"}),e.jsxs("div",{children:[O.theta*180/Math.PI.toFixed(2),"°"]})]}),e.jsxs("div",{style:m,children:[e.jsx("div",{children:"Angular Velocity"}),e.jsxs("div",{children:[O.omega.toFixed(3)," rad/s"]})]}),e.jsx("div",{style:{fontWeight:900,color:"#dbeefe",marginTop:10,marginBottom:4},children:"Energy (J)"}),e.jsxs("div",{style:m,children:[e.jsx("div",{children:"KE"}),e.jsx("div",{children:v?v.KE.toFixed(3):"—"})]}),e.jsxs("div",{style:m,children:[e.jsx("div",{children:"PE"}),e.jsx("div",{children:v?v.PE.toFixed(3):"—"})]}),e.jsxs("div",{style:m,children:[e.jsx("div",{children:"Total"}),e.jsx("div",{children:v?v.E.toFixed(3):"—"})]}),e.jsx("hr",{style:{border:"none",height:1,background:"rgba(255,255,255,0.1)",margin:"10px 0"}}),e.jsxs("div",{style:m,children:[e.jsx("div",{children:"Analytic Period"}),e.jsxs("div",{children:[ee.toFixed(3)," s"]})]}),e.jsxs("div",{style:m,children:[e.jsx("div",{children:"Measured Period"}),e.jsx("div",{children:W?W.toFixed(3)+" s":"—"})]})]})]})})}function g({label:L,value:A,set:z,min:C,max:d,step:S,purpose:x}){return e.jsxs("div",{style:{marginBottom:14},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#cfe6ff"},children:[e.jsx("div",{children:L}),e.jsx("div",{style:{color:"#9fb6d8"},children:A.toFixed(2)})]}),e.jsx("input",{type:"range",min:C,max:d,step:S,value:A,onChange:R=>z(Number(R.target.value)),style:re}),e.jsx("div",{style:{fontSize:11,color:"#a0aec0",marginTop:2},children:x})]})}const J={background:"linear-gradient(90deg,#7c3aed,#a78bfa)",color:"#fff",border:"none",borderRadius:8,padding:"6px 10px",fontWeight:700,cursor:"pointer",fontSize:13},ie={...J,background:"linear-gradient(90deg,#ef4444,#f97316)"},re={width:"100%",appearance:"none",height:8,borderRadius:6,background:"linear-gradient(90deg,#2b3a4b,#17202a)",outline:"none"},m={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6,fontSize:13};export{ce as default};
